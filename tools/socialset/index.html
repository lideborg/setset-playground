<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SocialSet</title>
    <link rel="stylesheet" href="/shared/css/tokens.css">
    <link rel="stylesheet" href="/shared/css/base.css">
    <link rel="stylesheet" href="/shared/css/components.css">
    <style>
        .container {
            max-width: 1400px;
        }

        /* Step Sections */
        .step-section {
            margin-bottom: var(--space-lg);
            padding-bottom: var(--space-lg);
            border-bottom: 1px solid var(--gainsboro);
        }

        .step-header {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            margin-bottom: var(--space-md);
        }

        .step-number {
            width: 28px;
            height: 28px;
            background: var(--jet);
            color: var(--white);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--text-sm);
            font-weight: 600;
        }

        .step-title {
            font-size: var(--text-lg);
            font-weight: 600;
            color: var(--jet);
        }

        .step-subtitle {
            font-size: var(--text-sm);
            color: var(--slate);
            margin-left: auto;
        }

        /* Model Selection Grid */
        .model-tabs {
            display: flex;
            gap: 0;
            margin-bottom: var(--space-md);
            border-bottom: 1px solid var(--gainsboro);
        }

        .model-tab {
            padding: 10px 20px;
            font-size: var(--text-sm);
            font-weight: 500;
            background: none;
            border: none;
            border-bottom: 2px solid transparent;
            color: var(--slate);
            cursor: pointer;
            transition: all var(--transition-fast);
            margin-bottom: -1px;
        }

        .model-tab:hover {
            color: var(--jet);
        }

        .model-tab.active {
            color: var(--jet);
            border-bottom-color: var(--jet);
        }

        .model-tab-content {
            display: none;
            min-height: 100px;
        }

        .model-tab-content.active {
            display: block;
        }

        .model-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: var(--space-sm);
        }

        .model-card {
            aspect-ratio: 3/4;
            border-radius: var(--radius-md);
            overflow: hidden;
            cursor: pointer;
            position: relative;
            border: 2px solid var(--gainsboro);
            transition: all var(--transition-fast);
            background: var(--off-white);
        }

        .model-card:hover {
            border-color: var(--ash-grey);
        }

        .model-card.selected {
            border-color: var(--jet);
        }

        .model-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .model-card .check-mark {
            position: absolute;
            top: 6px;
            right: 6px;
            width: 22px;
            height: 22px;
            background: var(--jet);
            color: var(--white);
            border-radius: 50%;
            display: none;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }

        .model-card.selected .check-mark {
            display: flex;
        }

        .model-card .model-name {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 6px;
            background: rgba(255,255,255,0.9);
            font-size: 11px;
            text-align: center;
            color: var(--jet);
        }

        /* Model Upload Area */
        .model-upload-area {
            display: flex;
            gap: var(--space-md);
            align-items: flex-start;
        }

        .model-upload-slot {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-xs);
        }

        .model-slot-label {
            font-size: var(--text-xs);
            color: var(--slate);
        }

        .model-preview {
            width: 140px;
            aspect-ratio: 3/4;
            border: 2px dashed var(--gainsboro);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            overflow: hidden;
            transition: all var(--transition-fast);
            background: var(--off-white);
        }

        .model-preview:hover {
            border-color: var(--jet);
        }

        .model-preview.has-image {
            border-style: solid;
            border-color: var(--jet);
        }

        .model-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .model-preview-placeholder {
            text-align: center;
            color: var(--ash-grey);
            padding: var(--space-sm);
            font-size: var(--text-xs);
        }

        .model-preview-placeholder svg {
            width: 32px;
            height: 32px;
            margin-bottom: var(--space-2xs);
            opacity: 0.5;
        }

        /* Poses Grid */
        .poses-container {
            display: flex;
            flex-direction: column;
            gap: var(--space-lg);
        }

        .pose-category-title {
            font-size: var(--text-xs);
            font-weight: 600;
            color: var(--slate);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: var(--space-sm);
        }

        .poses-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: var(--space-sm);
        }

        .pose-card {
            display: flex;
            flex-direction: column;
            border-radius: var(--radius-md);
            overflow: hidden;
            border: 2px solid var(--gainsboro);
            transition: all var(--transition-fast);
            background: var(--white);
            cursor: pointer;
        }

        .pose-card:hover {
            border-color: var(--ash-grey);
        }

        .pose-card.active {
            border-color: var(--jet);
        }

        .pose-card-image {
            aspect-ratio: 3/4;
            position: relative;
            overflow: hidden;
        }

        .pose-card-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .pose-card .pose-name {
            font-size: 10px;
            padding: 4px 2px;
            text-align: center;
            background: var(--off-white);
            color: var(--slate);
            border-top: 1px solid var(--gainsboro);
        }

        .pose-card .pose-count {
            position: absolute;
            top: 4px;
            right: 4px;
            min-width: 18px;
            height: 18px;
            background: var(--jet);
            color: var(--white);
            border-radius: 9px;
            display: none;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: 600;
            padding: 0 4px;
        }

        .pose-card.active .pose-count {
            display: flex;
        }

        .pose-slider-row {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px 4px;
            background: var(--off-white);
        }

        .pose-slider {
            width: 95%;
            -webkit-appearance: none;
            height: 2px;
            background: var(--gainsboro);
            border-radius: 1px;
            outline: none;
            margin: 0;
        }

        .pose-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 12px;
            height: 12px;
            background: var(--jet);
            border-radius: 50%;
            cursor: pointer;
        }

        /* Product Categories Grid (4x2) */
        .product-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: var(--space-md);
        }

        .product-card {
            background: var(--white);
            border: 1px solid var(--gainsboro);
            border-radius: var(--radius-md);
            overflow: hidden;
            transition: all var(--transition-fast);
        }

        .product-card:hover {
            border-color: var(--ash-grey);
        }

        .product-card.disabled {
            opacity: 0.4;
        }

        .product-card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--space-sm);
            background: var(--off-white);
            border-bottom: 1px solid var(--gainsboro);
        }

        .product-card-title {
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--jet);
        }

        .product-card-toggle {
            width: 36px;
            height: 20px;
            background: var(--gainsboro);
            border-radius: 10px;
            position: relative;
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .product-card-toggle.active {
            background: var(--jet);
        }

        .product-card-toggle::after {
            content: '';
            position: absolute;
            width: 16px;
            height: 16px;
            background: var(--white);
            border-radius: 50%;
            top: 2px;
            left: 2px;
            transition: all var(--transition-fast);
        }

        .product-card-toggle.active::after {
            left: 18px;
        }

        .product-card-content {
            padding: var(--space-sm);
            min-height: 160px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .product-preview {
            width: 100%;
            aspect-ratio: 3/4;
            border: 2px dashed var(--gainsboro);
            border-radius: var(--radius-sm);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all var(--transition-fast);
            background: var(--off-white);
            overflow: hidden;
            position: relative;
        }

        .product-preview:hover {
            border-color: var(--ash-grey);
        }

        .product-preview.has-image {
            border-style: solid;
            border-color: var(--gainsboro);
        }

        .product-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .product-preview-placeholder {
            text-align: center;
            color: var(--ash-grey);
            font-size: var(--text-xs);
        }

        .product-preview-placeholder svg {
            width: 32px;
            height: 32px;
            margin-bottom: var(--space-2xs);
            opacity: 0.4;
        }

        .product-nav {
            position: absolute;
            bottom: 4px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 4px;
            background: rgba(255,255,255,0.9);
            padding: 4px 8px;
            border-radius: 12px;
            opacity: 0;
            transition: opacity var(--transition-fast);
        }

        .product-preview:hover .product-nav {
            opacity: 1;
        }

        .product-nav-btn {
            width: 20px;
            height: 20px;
            border: none;
            background: var(--gainsboro);
            border-radius: 50%;
            cursor: pointer;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--transition-fast);
        }

        .product-nav-btn:hover {
            background: var(--jet);
            color: var(--white);
        }

        /* Outfit Actions */
        .outfit-actions {
            display: flex;
            gap: var(--space-sm);
            margin-top: var(--space-md);
            justify-content: center;
        }

        .btn--outline {
            background: var(--white);
            border: 1px solid var(--jet);
            color: var(--jet);
        }

        .btn--outline:hover {
            background: var(--off-white);
        }

        /* Gender Filter */
        .gender-filter {
            display: flex;
            gap: var(--space-xs);
            margin-bottom: var(--space-md);
        }

        /* Generate Section */
        .generate-section {
            background: var(--off-white);
            border-radius: var(--radius-md);
            padding: var(--space-md);
        }

        .generate-settings {
            display: flex;
            gap: var(--space-lg);
            align-items: center;
            margin-bottom: var(--space-md);
        }

        .setting-inline {
            display: flex;
            align-items: center;
            gap: var(--space-xs);
        }

        .setting-inline label {
            font-size: var(--text-xs);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--slate);
        }

        .calc-display {
            font-size: var(--text-sm);
            color: var(--slate);
            margin-bottom: var(--space-sm);
            text-align: center;
        }

        /* Progress Section */
        .progress-section {
            display: none;
            margin-top: var(--space-lg);
            padding: var(--space-lg);
            background: var(--white);
            border-radius: var(--radius-lg);
            border: 1px solid var(--gainsboro);
        }

        .progress-section.visible {
            display: block;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-sm);
        }

        .progress-title {
            font-size: var(--text-xs);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--slate);
        }

        .progress-count {
            font-size: var(--text-sm);
            font-weight: 600;
            color: var(--jet);
        }

        .progress-bar-container {
            height: 8px;
            background: var(--off-white);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: var(--jet);
            border-radius: 4px;
            transition: width 0.3s ease;
            width: 0%;
        }

        /* Results Grid */
        .results-section {
            display: none;
            margin-top: var(--space-lg);
        }

        .results-section.visible {
            display: block;
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-md);
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: var(--space-md);
        }

        .result-card {
            position: relative;
            border-radius: var(--radius-md);
            overflow: hidden;
            cursor: pointer;
            border: 2px solid var(--gainsboro);
            transition: all var(--transition-fast);
        }

        .result-card:hover {
            border-color: var(--jet);
        }

        .result-card img {
            width: 100%;
            aspect-ratio: 4/5;
            object-fit: cover;
            display: block;
        }

        .result-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: var(--space-sm);
            background: linear-gradient(to top, rgba(0,0,0,0.7), transparent);
            color: var(--white);
            opacity: 0;
            transition: opacity var(--transition-fast);
        }

        .result-card:hover .result-overlay {
            opacity: 1;
        }

        .result-prompt {
            font-size: var(--text-xs);
            line-height: 1.4;
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: var(--space-xl);
            color: var(--ash-grey);
        }

        .empty-state svg {
            width: 48px;
            height: 48px;
            margin-bottom: var(--space-sm);
            opacity: 0.5;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="hero">
            <h1>SocialSet</h1>
            <p class="hero-subtitle">Generate editorial Instagram content with AI-powered outfit styling</p>
            <a href="product-generator.html" class="hero-link" style="font-size: 12px; color: var(--slate); text-decoration: underline; margin-top: 8px; display: inline-block;">Need product images? Use Product Generator</a>
        </div>

        <!-- Step 1: Select Model -->
        <div class="step-section">
            <div class="step-header">
                <div class="step-number">1</div>
                <div class="step-title">Select Model</div>
                <div class="step-subtitle" id="model-status">No model selected</div>
            </div>

            <div class="model-tabs">
                <button class="model-tab active" data-tab="setset">SetSet Models</button>
                <button class="model-tab" data-tab="upload">Upload</button>
            </div>

            <div class="model-tab-content active" data-content="setset">
                <div class="model-grid" id="model-grid">
                    <!-- Models will be populated here -->
                </div>
            </div>

            <div class="model-tab-content" data-content="upload">
                <div class="model-upload-area">
                    <div class="model-upload-slot">
                        <div class="model-slot-label">Portrait</div>
                        <div class="model-preview" id="upload-portrait" onclick="document.getElementById('portrait-input').click()">
                            <div class="model-preview-placeholder">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                    <rect x="3" y="3" width="18" height="18" rx="2"/>
                                    <circle cx="8.5" cy="8.5" r="1.5"/>
                                    <path d="M21 15l-5-5L5 21"/>
                                </svg>
                                <div>Drop or click</div>
                            </div>
                        </div>
                    </div>
                    <div class="model-upload-slot">
                        <div class="model-slot-label">Full Body</div>
                        <div class="model-preview" id="upload-fullbody" onclick="document.getElementById('fullbody-input').click()">
                            <div class="model-preview-placeholder">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                    <rect x="3" y="3" width="18" height="18" rx="2"/>
                                    <circle cx="8.5" cy="8.5" r="1.5"/>
                                    <path d="M21 15l-5-5L5 21"/>
                                </svg>
                                <div>Drop or click</div>
                            </div>
                        </div>
                    </div>
                </div>
                <input type="file" id="portrait-input" accept="image/*" style="display: none;">
                <input type="file" id="fullbody-input" accept="image/*" style="display: none;">
            </div>
        </div>

        <!-- Step 2: Select Poses -->
        <div class="step-section">
            <div class="step-header">
                <div class="step-number">2</div>
                <div class="step-title">Select Poses</div>
                <div class="step-subtitle" id="pose-status">0 poses selected</div>
            </div>

            <div class="poses-container">
                <div class="pose-category">
                    <div class="pose-category-title">PDP (E-Commerce)</div>
                    <div class="poses-grid" id="poses-pdp">
                        <!-- PDP poses will be populated here -->
                    </div>
                </div>
                <div class="pose-category">
                    <div class="pose-category-title">Lifestyle (Editorial)</div>
                    <div class="poses-grid" id="poses-lifestyle">
                        <!-- Lifestyle poses will be populated here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 3: Build Outfit -->
        <div class="step-section">
            <div class="step-header">
                <div class="step-number">3</div>
                <div class="step-title">Build Outfit</div>
                <div class="step-subtitle" id="outfit-status">0 items selected</div>
            </div>

            <div class="gender-filter">
                <button class="btn btn--toggle active" data-gender="female">Female</button>
                <button class="btn btn--toggle" data-gender="male">Male</button>
            </div>

            <div class="product-grid" id="product-grid">
                <!-- Product category cards will be populated here -->
            </div>

            <div class="outfit-actions">
                <button class="btn btn--outline" id="randomize-btn">Randomize Outfit</button>
                <button class="btn btn--outline" id="clear-outfit-btn">Clear All</button>
            </div>
        </div>

        <!-- Step 4: Generate -->
        <div class="step-section">
            <div class="step-header">
                <div class="step-number">4</div>
                <div class="step-title">Generate</div>
            </div>

            <div class="generate-section">
                <div class="generate-settings">
                    <div class="setting-inline">
                        <label>Aspect Ratio</label>
                        <div class="btn-group">
                            <button class="btn btn--toggle" data-ratio="1:1">1:1</button>
                            <button class="btn btn--toggle active" data-ratio="4:5">4:5</button>
                            <button class="btn btn--toggle" data-ratio="9:16">9:16</button>
                        </div>
                    </div>
                    <div class="setting-inline">
                        <label>Model</label>
                        <div class="btn-group">
                            <button class="btn btn--toggle active" data-model="nanobanana">Nano v1</button>
                            <button class="btn btn--toggle" data-model="nano-pro">Nano v2</button>
                        </div>
                    </div>
                    <div class="setting-inline">
                        <label>Resolution</label>
                        <div class="btn-group">
                            <button class="btn btn--toggle active" data-res="1K">1K</button>
                            <button class="btn btn--toggle" data-res="2K">2K</button>
                        </div>
                    </div>
                </div>

                <div class="calc-display" id="calc-display">
                    1 model × 0 poses × 1 variation = 0 images
                </div>

                <button class="btn btn--primary btn--lg btn--block" id="generate-btn" disabled>
                    Generate Images
                </button>
            </div>
        </div>

        <!-- Progress -->
        <div class="progress-section" id="progress-section">
            <div class="progress-header">
                <span class="progress-title">Generating</span>
                <span class="progress-count" id="progress-count">0 / 0</span>
            </div>
            <div class="progress-bar-container">
                <div class="progress-bar" id="progress-bar"></div>
            </div>
        </div>

        <!-- Results -->
        <div class="results-section" id="results-section">
            <div class="results-header">
                <h2>Results</h2>
                <p class="hero-subtitle">Click to view details</p>
            </div>
            <div class="results-grid" id="results-grid"></div>
        </div>
    </div>

    <!-- Lightbox -->
    <div class="lightbox" id="lightbox">
        <div class="lightbox-content">
            <button class="lightbox-close" id="lightbox-close">&times;</button>
            <div class="lightbox-left">
                <img src="" alt="" class="lightbox-image" id="lightbox-image">
            </div>
            <div class="lightbox-right">
                <div class="lightbox-section">
                    <h3 class="lightbox-section-title">Model</h3>
                    <p class="lightbox-model-text" id="lightbox-model"></p>
                </div>
                <div class="lightbox-section">
                    <h3 class="lightbox-section-title">Outfit</h3>
                    <p id="lightbox-outfit"></p>
                </div>
                <div class="lightbox-section">
                    <h3 class="lightbox-section-title">Prompt</h3>
                    <p class="lightbox-prompt-text" id="lightbox-prompt"></p>
                </div>
                <button class="lightbox-download" id="lightbox-download">Download Image</button>
            </div>
        </div>
    </div>

    <!-- Loading -->
    <div class="loading-overlay" id="loading">
        <div class="spinner"></div>
        <p class="loading-text" id="loading-text">Loading...</p>
    </div>

    <!-- Scripts -->
    <script src="/shared/js/models.js"></script>
    <script src="/shared/js/utils.js"></script>
    <script src="/shared/js/api.js"></script>
    <script src="poses.js"></script>
    <script src="categories.js"></script>
    <script src="app.js"></script>
</body>
</html>
